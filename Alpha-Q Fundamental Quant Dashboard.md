
---

# ğŸ§  [SYSTEM PROMPT] Alpha-Q é‡åŒ–åˆ†æä¸å¼‚åŠ¨é¢„è­¦å¹³å°å¼€å‘æ€»çº²

> **è‡´ AI ç¼–ç¨‹åŠ©æ‰‹**ï¼š
> è¯·ä»”ç»†é˜…è¯»ä»¥ä¸‹å…¨å±€èƒŒæ™¯ã€ç¡¬æ€§çº¦æŸå’Œæ‰§è¡Œç®¡çº¿ã€‚æˆ‘æ˜¯ä¸€åé‡‘è/ç»æµ/è´¸æ˜“ç›¸å…³ä¸“ä¸šçš„å­¦ç”Ÿï¼Œä½ éœ€è¦å¸®æˆ‘å¼€å‘ä¸€ä¸ªæå…·ä¸“ä¸šåº¦ã€èƒ½ä½œä¸ºæˆ‘æ±‚èŒé‡åŒ–ç ”ç©¶å‘˜/å…¨æ ˆæ•°æ®åˆ†æå¸ˆçš„â€œæ€æ‰‹çº§â€ Portfolioï¼ˆä½œå“é›†ï¼‰ã€‚
> **è¯·åŠ¡å¿…ä¸¥æ ¼æŒ‰ç…§æˆ‘çš„ Task ä»»åŠ¡æµåˆ†å¸ƒè¾“å‡ºä»£ç ï¼Œä¸è¦è‡ªç”±å‘æŒ¥åç¦»æŠ€æœ¯æ ˆã€‚**

---

## â³ ä¸€ã€ æå…¶é‡è¦çš„æ—¶é—´çº¿ä¸æ¶æ„ç”Ÿæ­»çº¿ (Critical Constraints)

1. **GCP ç ´é‡œæ²‰èˆŸ (The 48-Hour Deadline)**ï¼š
æˆ‘ç°åœ¨ç»‘å®š GCP çš„ä¿¡ç”¨å¡ä½“éªŒé‡‘ï¼ˆ$300ï¼‰è¿˜æœ‰æœ€åå‡ å¤©åˆ°æœŸï¼Œ**æˆ‘å°†åœ¨ 48 å°æ—¶åæ°¸ä¹…å…³é—­ GCP ç»“ç®—è´¦å·ï¼**
 * **åæœä¸æ¨è®º**ï¼šæœ€ç»ˆéƒ¨ç½²åˆ°äº‘ç«¯çš„ Web App **ç»å¯¹ä¸èƒ½**åŒ…å«ä»»ä½•è¯·æ±‚ Google Vertex AIã€Gemini æˆ– BigQuery çš„ API è°ƒç”¨ï¼Œå¦åˆ™ä»£ç å°†ç›´æ¥å´©æºƒã€‚
 * **è§£å†³æ–¹æ¡ˆ (Two-Phase Architecture)**ï¼š
 * **Phase 1 (æœ¬åœ°æé™æ¦¨å–)**ï¼šæˆ‘å·²ç»é…ç½®å¥½äº†æœ¬åœ° GCP å‡­è¯ã€‚æˆ‘åˆšåˆšç”¨ä¸€ä¸ªè„šæœ¬è·‘å®Œäº† 111 åªæ ¸å¿ƒç¾è‚¡ 2017-2025 å¹´çš„ LLM è´¢æŠ¥éç»“æ„åŒ–æ•°æ®ï¼Œå¹¶å­˜ä¸ºäº†æœ¬åœ° `insights.db` (SQLite)ã€‚æ¥ä¸‹æ¥ä½ éœ€è¦å†™**åªåœ¨æœ¬åœ°è¿è¡Œçš„è„šæœ¬**ï¼ŒæŠŠå‰©ä¸‹çš„ç¡¬è´¢åŠ¡æ•°æ®æŠ“å®Œï¼Œå’Œ `insights.db` èåˆæˆä¸€ä¸ªæœ€ç»ˆçš„ã€è„±æœºçš„åªè¯»æ•°æ®åº“ã€‚
 * **Phase 2 (çº¯å‡€è„±æœºä¸Šäº‘)**ï¼šWeb App åªèƒ½è¯»å–æ‰“åŒ…å¥½çš„æ•°æ®æ–‡ä»¶æˆ–å®¿ä¸»ä½“å†…çš„æ•°æ®åº“ï¼Œå®Œå…¨ä¸ GCP è„±é’©ã€‚

2. **éƒ¨ç½²æ‹“æ‰‘ä¸ç½‘ç»œè§„åˆ’ (Deployment Topology)**ï¼š
æœ€ç»ˆäº§ç‰©å°†éƒ¨ç½²åœ¨å¤–ç½‘ä¸€å°å»‰ä»·è½»é‡æœåŠ¡å™¨ä¸Šã€‚
 * **æœåŠ¡å™¨ç®¡ç†**ï¼šä½¿ç”¨ 1Panel é¢æ¿ç®¡ç†ã€‚å®¿ä¸»æœºè‡ªå¸¦ OpenResty (Nginx), Dockerï¼Œå¹¶ä¸”å·²ç»æœ‰ PostgreSQL, MySQL, Redis å®¹å™¨åœ¨è¿è¡Œã€‚
 * **å®¹å™¨ç¼–æ’**ï¼šå¿…é¡»ä½¿ç”¨ `docker-compose`ã€‚æ‰€æœ‰å¾®æœåŠ¡å¿…é¡»åœ¨åŒä¸€ä¸ªè‡ªå»ºç½‘æ®µ `alpha_q_net` ä¸­é€šä¿¡ã€‚æ³¨æ„ç›¸å¯¹è·¯å¾„çš„å®‰å…¨æ˜ å°„ã€‚
 * **ç«¯å£ä¸¥æ ¼é™åˆ¶**ï¼šä»…é™ä½¿ç”¨ **`8040-8049`** ç«¯å£å¯¹å¤–æ˜ å°„ã€‚
 * `8040`: å‰ç«¯ (Streamlit)
 * `8041`: åç«¯ (FastAPI)
 * **é•œåƒè§„èŒƒ**ï¼šé•œåƒåç§°å¿…é¡»æŒ‡å®šä¸ºæˆ‘çš„ Docker Hub è´¦å·ï¼Œå¦‚ `fuzhouxing/alpha-q-frontend:latest` å’Œ `fuzhouxing/alpha-q-backend:latest`ã€‚

---

## ğŸ¯ äºŒã€ æ ¸å¿ƒäº§å“å®šä¹‰ï¼šAlpha-Q Fundamental Quant Dashboard

åˆ©ç”¨æˆ‘å·²ç»å‡†å¤‡å¥½çš„å¤§è¯­è¨€æ¨¡å‹è¯»è´¢æŠ¥å¾—å‡ºçš„â€œè½¯æ€§ç»“è®ºâ€ï¼Œç»“åˆä½ å³å°†å¸®æˆ‘æŠ“å–çš„â€œç¡¬æ€§è´¢åŠ¡æ•°æ®â€ï¼Œå®ç°ä¸‰å¤§çœ‹æ¿åŠŸèƒ½ï¼š

1. **M1 æ•°æ®é€è§†æ¿ (Hard Numbers)**ï¼šé€šè¿‡è´¢åŠ¡ä¸‰è¡¨æ•°æ®ï¼Œåœ¨åç«¯è®¡ç®— Piotroski F-Score (è´¢åŠ¡å¥åº·åº¦) å’Œ Altman Z-Score (ç ´äº§é£é™©)ï¼Œå¹¶åœ¨å‰ç«¯ç”¨æ·±è‰²æå®¢é£æ ¼çš„ Plotly å›¾è¡¨å±•ç¤ºå†å²æ›²çº¿ï¼Œå¹¶å±•ç¤º ROE æœé‚¦åˆ†ææ‹†è§£å›¾ã€‚
2. **M2 å¼‚åŠ¨æ—¶é—´è½´ (Soft Tone)**ï¼šå°†å·²æœ‰ `insights.db` ä¸­çš„ `mda_sentiment_score`ï¼ˆé«˜ç®¡æƒ…ç»ªæ‰“åˆ†ï¼‰ã€`macro_concerns`ï¼ˆå®è§‚æ‹…å¿§ï¼‰ç­‰é€šè¿‡æ—¶é—´è½´ç€‘å¸ƒæµå±•ç¤ºï¼Œå¹¶è®¡ç®—å‡ºå¹´åº¦çš„ Semantic Diffï¼ˆè¯­ä¹‰çªå˜ï¼Œæ¯”å¦‚ä»Šå¹´æ¯”å»å¹´å¤šæäº†å“ªäº›é£é™©è¯ï¼‰ã€‚
3. **M3 äº¤å‰éªŒè¯çº¢æ—— (The Red Flag Matrix)**ï¼š**æœ¬é¡¹ç›®çš„çµé­‚ã€‚** å»ºç«‹æŠ¥è­¦é€»è¾‘ï¼šä¾‹å¦‚å¦‚æœè´¢åŠ¡ä¸Šçš„â€œç»è¥ç°é‡‘æµå è¥æ”¶æ¯”â€æ¶åŒ–ï¼Œ**åŒæ—¶** LLMæå–çš„è´¢æŠ¥æ–‡æœ¬ä¸­é¦–æ¬¡æåŠâ€œåè´¦/æµåŠ¨æ€§å±æœºâ€ï¼Œç«‹åˆ»åœ¨å‰ç«¯æ‰“å‡ºé†’ç›®çš„ ğŸš© é«˜çº§é¢„è­¦å¡ç‰‡ã€‚

---

## ğŸš€ ä¸‰ã€ ä¸¥æ ¼åˆ†å¸ƒä»»åŠ¡æµ (Step-by-Step Task Execution)

**ä½œä¸º AI åŠ©æ‰‹ï¼Œè¯·æ¯æ¬¡åªæ‰§è¡Œä¸€ä¸ª Taskï¼Œå®Œæˆåè¯¢é—®æˆ‘æ˜¯å¦â€œç»§ç»­ (Proceed)â€ï¼Œä¸è¦ä¸€æ¬¡æ€§å†™å®Œæ‰€æœ‰æ–‡ä»¶çš„ä»£ç ä»¥ä¾¿æˆ‘è¿›è¡Œå®¡è®¡ã€‚**

### ğŸ“¦ Task 1: è„±æœºæ•°æ®é—­ç¯ (The Offline DB Fusion)
* **ç›®æ ‡ç›®å½•**: `/scripts` ï¼ˆä»…æœ¬åœ°è¿è¡Œï¼Œä¸è¿› Dockerï¼‰
* **éœ€æ±‚**:
 1. ç¼–å†™ `01_fetch_yfinance_and_calc.py`ï¼šè¯»å–æˆ‘å·²æœ‰çš„ `data/insights.db` ä¸­çš„è‚¡ç¥¨ä»£ç  (Tickers)ã€‚ä½¿ç”¨ `yfinance` åº“ï¼ˆå…è´¹ä¸”æ— éœ€API Keyï¼‰ï¼Œæ‰¹é‡æ‹‰å–è¿™ 111 å®¶å…¬å¸ 2017-2025 å¹´çš„èµ„äº§è´Ÿå€ºè¡¨ã€åˆ©æ¶¦è¡¨æ ¸å¿ƒç§‘ç›®ã€‚Company & Year Configä½äº`stocks.toml`ï¼Œä¿ç•™é€šè¿‡é…ç½®tomlæ–‡ä»¶å¢å‡å¹´ä»½ä¸è‚¡ç¥¨ã€‚
 2. è®¡ç®—æ¯å¹´çš„ F-Scoreã€Z-Score æ ¸å¿ƒå‚æ•°ã€‚
 3. ç¼–å†™ `02_merge_to_master.py`ï¼šå°†è®¡ç®—å¥½çš„è´¢åŠ¡æŒ‡æ ‡æ•°æ®ï¼Œä¸åŸæœ¬çš„ NLP è½¯æ€§æŒ‡æ ‡æ•°æ®é€šè¿‡ Ticker å’Œ Year è¿›è¡Œ INNER JOINã€‚
 4. è¾“å‡ºç»ˆæäº§ç‰©ï¼šå¯¼å‡ºä¸ºä¸€ä»½æç«¯å¹²å‡€çš„ `alpha_q_master.db` (SQLite)ï¼Œä»¥åŠä¸€å¥—ç¬¦åˆ 1Panel PostgreSQL çš„ `.sql` å¯¼å…¥è„šæœ¬ï¼ˆä»¥è¢«å¤‡åç”¨ï¼‰ã€‚è¯¥ DB å°†ä½œä¸º Phase 2 çš„å”¯ä¸€æ•°æ®æºã€‚

### ğŸ”Œ Task 2: åç«¯æ•°æ®æ ¸å¿ƒå¼€å‘ (FastAPI Backend)
* **ç›®æ ‡ç›®å½•**: `/backend`
* **éœ€æ±‚**:
 1. ç¼–å†™æ— çŠ¶æ€çš„ FastAPI æœåŠ¡ã€‚å®ƒé€šè¿‡ SQLAlchemy è¯»å–åªè¯»çš„ `alpha_q_master.db`ï¼ˆæˆ–é€šè¿‡ç¯å¢ƒå˜é‡åˆ‡æ¢åˆ° 1Panel PostgreSQLï¼‰ã€‚
 2. æä¾›æ ‡å‡†çš„ RESTful APIï¼š
 * `/api/v1/ticker/{symbol}/quant_scores` -> è¿”å› F-score, Z-score æ—¶é—´åºåˆ—
 * `/api/v1/ticker/{symbol}/nlp_diff` -> è¿”å› NLP æ•°æ®çš„åŒæ¯”å˜åŒ–ç‚¹
 * `/api/v1/ticker/{symbol}/red_flags` -> è¿è¡Œé¢„å®šè§„åˆ™ï¼Œè¿”å›è§¦å‘çš„é¢„è­¦æ•°ç»„
 3. ç¼–å†™ `backend/Dockerfile`ã€‚

### ğŸ“Š Task 3: å‰ç«¯é‡åŒ–ä»ªè¡¨ç›˜å¼€å‘ (Streamlit Frontend)(äº¤ç”±geminiå®Œæˆ)
* **ç›®æ ‡ç›®å½•**: `/frontend`
* **éœ€æ±‚**:
 1. å¼€å‘ Streamlit UIã€‚ä¸»é¢˜é…ç½®ä¸ºæš—é»‘æ¨¡å¼ (Dark Mode)ï¼Œä½“ç°é‡åŒ–é‡‘èçš„é«˜çº§æ„Ÿã€‚
 2. å·¦ä¾§è¾¹æ ï¼šæ£€ç´¢ Tickerã€‚
 3. ä¸»ä½“åˆ†ä¸‰åˆ—æ¨¡å—æ¸²æŸ“ **Hard Numbers å›¾è¡¨**ã€**Red Flag é¢„è­¦é¢æ¿**ã€**éç»“æ„åŒ–é£é™©ç€‘å¸ƒæµ**ã€‚
 4. ç¼–å†™ `frontend/Dockerfile`ã€‚æ³¨æ„ï¼šå‰ç«¯å¿…é¡»é€šè¿‡ç›¸å¯¹ URL æˆ–æŒ‡å®šçš„ç¯å¢ƒå˜é‡è®¿é—®åç«¯çš„ APIï¼ˆåœ¨ Docker ç½‘ç»œå†…é€šä¿¡ï¼Œä¾‹å¦‚æŒ‡å‘ `http://alpha-q-backend:8000`ï¼‰ã€‚

### ğŸš¢ Task 4: ä¸€é”®ä¸Šäº‘ä¸ 1Panel éƒ¨ç½² (DevOps)
* **ç›®æ ‡ç›®å½•**: æ ¹ç›®å½• `/`
* **éœ€æ±‚**:
 1. ç¼–å†™ `docker-compose.yml`ã€‚å®šä¹‰ `alpha_q_net`ã€‚é…ç½®æœåŠ¡ `alpha-q-backend` æ˜ å°„ç»™å®¿ä¸»æœºçš„ `8041`ï¼›`alpha-q-frontend` æ˜ å°„ç»™å®¿ä¸»æœºçš„ `8040`ã€‚æŒ‚è½½åªè¯»æ•°æ®åº“å·ã€‚
 2. ç¼–å†™ `Makefile` æˆ– `build.sh`ï¼Œå®ç°ä¸€é”® `docker build` å¹¶æ‰“ tag push åˆ° `fuzhouxing/alpha-q-frontend:latest` å’Œ `backend:latest` çš„å‘½ä»¤è¡Œã€‚
 3. æä¾›ä¸€ä»½ Markdown è¯´æ˜ï¼Œå‘Šè¯‰æˆ‘åœ¨ 1Panel çœŸå®çš„ OpenResty é…ç½®ä¸­ï¼Œå¦‚ä½•å»ºç«‹ä¸€ä¸ªåå‘ä»£ç†ä»£ç†åˆ° `http://127.0.0.1:8040` ä»¥æš´éœ²å‰ç«¯é¡µé¢ã€‚
